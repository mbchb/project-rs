jQuery.fn.isOnScreen = function(){
    
    var win = jQuery(window);
    
    var viewport = {
        top : win.scrollTop(),
        left : win.scrollLeft()
    };
    viewport.right = viewport.left + win.width();
    viewport.bottom = viewport.top + win.height();
    
    var bounds = this.offset();
    bounds.right = bounds.left + this.outerWidth();
    bounds.bottom = bounds.top + this.outerHeight();
    
    return (!(viewport.right < bounds.left || viewport.left > bounds.right || viewport.bottom < bounds.top || viewport.top > bounds.bottom));
    
};

function count_int()
{
  var tab=jQuery('.count_int');

  for(var i=0; i<tab.length; i++)
  {
      if($(tab[i]).length && $(tab[i]).isOnScreen())
      {
        $(tab[i]).text($(tab[i]).attr('data-int'));
        
        $(tab[i]).each(function () {
            $(this).prop('Counter',-1).animate({
                Counter: $(this).text()
            }, {
                duration: 3000,
                easing: 'swing',
                step: function (now) {
                    $(this).text(Math.ceil(now));
                }
            });
        });    
      }
  }  
}


jQuery(document).ready(function($) {
  
  if($('.txt_anim').length)
  {
    var typed = new Typed('.txt_anim', {
      strings: ['<span style="visibility:hidden">_</span>', 'innovation', 'proximit√©', 'performance'],
      typeSpeed: 100,
      startDelay: 5,
      backSpeed: 50,
      loop: true,
    });
  }
  count_int();
  
  $(window).scroll(function(){count_int();}).resize(function(){count_int();});
  
  if(jQuery('.col_loupe .loupe').length)
  {
      jQuery('.col_loupe .loupe').click(function()
      {
          if(jQuery('.bloc_form_search').hasClass('open'))
          {
              jQuery('.bloc_form_search').removeClass('open');    
          }
          else
          {
              jQuery('.bloc_form_search').addClass('open');    
          }
      });
  }
  
  if(jQuery('.col_loupe1 .loupe1').length)
  {
      jQuery('.col_loupe1 .loupe1').click(function()
      {
          if(jQuery('.bloc_form_search').hasClass('open'))
          {
              jQuery('.bloc_form_search').removeClass('open');    
          }
          else
          {
              jQuery('.bloc_form_search').addClass('open');    
          }
      });
  }
  
});
